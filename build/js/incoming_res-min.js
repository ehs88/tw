function parse_int(e){output="";for(var r in e)char=e[r],char%1===0&&(isNaN(parseInt(char))||(output+=char));return parseInt(output)}var tables=document.querySelectorAll(".vis"),rows=tables[tables.length-1].querySelector("tbody").querySelectorAll("tr"),count=0,resources=[0,0,0];if(window.location.href.indexOf("screen=market&mode=send")===-1)alert('You need to be in the \'Send resources\' section of the market');else{for(var key in rows)key%1===0&&(row=rows[key],0!=count&&(content=row.querySelectorAll("td")[1].querySelector("span"),resource_type=content.querySelector("span").className,"icon header stone"==resource_type?resources[1]+=parse_int(content.innerHTML):"icon header wood"==resource_type?resources[0]+=parse_int(content.innerHTML):"icon header iron"==resource_type&&(resources[2]+=parse_int(content.innerHTML))),count++);null!==document.querySelector(".resource_info")&&document.querySelector(".resource_info").remove();var resource_info=document.createElement("p");resource_info.className="resource_info",resource_info.innerHTML="<b>Wood:</b> "+resources[0]+" <b>Clay:</b> "+resources[1]+" <b>Iron:</b> "+resources[2],tables[tables.length-1].parentNode.insertBefore(resource_info,tables[tables.length-1])}